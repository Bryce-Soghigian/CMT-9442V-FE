{"ast":null,"code":"var _jsxFileName = \"/Users/lambda_school_loaner_126/Desktop/CMT-FE/src/Components/ThreeEffects/Geometries/Tree.js\";\nimport React, { useEffect, useRef } from 'react';\nimport * as THREE from 'three';\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\nimport { GodRaysFakeSunShader, GodRaysDepthMaskShader, GodRaysCombineShader, GodRaysGenerateShader } from 'three/examples/jsm/shaders/GodRaysShader.js'; //Got Geometry from docs\n\nexport default function Tree() {\n  const TreeRef = useRef();\n  useEffect(() => {\n    var container, stats;\n    var camera, scene, renderer, materialDepth;\n    var sphereMesh;\n    var sunPosition = new THREE.Vector3(0, 1000, -1000);\n    var screenSpacePosition = new THREE.Vector3();\n    var mouseX = 0,\n        mouseY = 0;\n    var postprocessing = {\n      enabled: true\n    };\n    var orbitRadius = 200;\n    var bgColor = 0x000511;\n    var sunColor = 0xffee00; // Use a smaller size for some of the god-ray render targets for better performance.\n\n    var godrayRenderTargetResolutionMultiplier = 1.0 / 4.0;\n    init();\n    animate();\n\n    function init() {\n      container = document.createElement('div');\n      document.body.appendChild(container); //\n\n      camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 3000);\n      camera.position.z = 200;\n      scene = new THREE.Scene(); //\n\n      materialDepth = new THREE.MeshDepthMaterial();\n      var materialScene = new THREE.MeshBasicMaterial({\n        color: 0x000000\n      }); // tree\n\n      var loader = new OBJLoader();\n      loader.load('models/obj/tree.obj', function (object) {\n        object.material = materialScene;\n        object.position.set(0, -150, -150);\n        object.scale.multiplyScalar(400);\n        scene.add(object);\n      }); // sphere\n\n      var geo = new THREE.SphereBufferGeometry(1, 20, 10);\n      sphereMesh = new THREE.Mesh(geo, materialScene);\n      sphereMesh.scale.multiplyScalar(20);\n      scene.add(sphereMesh); //\n\n      renderer = new THREE.WebGLRenderer();\n      renderer.setClearColor(0xffffff);\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      container.appendChild(renderer.domElement);\n      renderer.autoClear = false; //\n\n      stats = new Stats();\n      container.appendChild(stats.dom); //\n\n      document.addEventListener('mousemove', onDocumentMouseMove, false);\n      document.addEventListener('touchstart', onDocumentTouchStart, false);\n      document.addEventListener('touchmove', onDocumentTouchMove, false);\n      window.addEventListener('resize', onWindowResize, false); //\n\n      initPostprocessing(window.innerWidth, window.innerHeight);\n    } //\n\n\n    function onDocumentMouseMove(event) {\n      mouseX = event.clientX - window.innerWidth / 2;\n      mouseY = event.clientY - window.innerHeight / 2;\n    }\n\n    function onDocumentTouchStart(event) {\n      if (event.touches.length === 1) {\n        event.preventDefault();\n        mouseX = event.touches[0].pageX - window.innerWidth / 2;\n        mouseY = event.touches[0].pageY - window.innerHeight / 2;\n      }\n    }\n\n    function onDocumentTouchMove(event) {\n      if (event.touches.length === 1) {\n        event.preventDefault();\n        mouseX = event.touches[0].pageX - window.innerWidth / 2;\n        mouseY = event.touches[0].pageY - window.innerHeight / 2;\n      }\n    } //\n\n\n    function onWindowResize() {\n      var renderTargetWidth = window.innerWidth;\n      var renderTargetHeight = window.innerHeight;\n      camera.aspect = renderTargetWidth / renderTargetHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(renderTargetWidth, renderTargetHeight);\n      postprocessing.rtTextureColors.setSize(renderTargetWidth, renderTargetHeight);\n      postprocessing.rtTextureDepth.setSize(renderTargetWidth, renderTargetHeight);\n      postprocessing.rtTextureDepthMask.setSize(renderTargetWidth, renderTargetHeight);\n      var adjustedWidth = renderTargetWidth * godrayRenderTargetResolutionMultiplier;\n      var adjustedHeight = renderTargetHeight * godrayRenderTargetResolutionMultiplier;\n      postprocessing.rtTextureGodRays1.setSize(adjustedWidth, adjustedHeight);\n      postprocessing.rtTextureGodRays2.setSize(adjustedWidth, adjustedHeight);\n    }\n\n    function initPostprocessing(renderTargetWidth, renderTargetHeight) {\n      postprocessing.scene = new THREE.Scene();\n      postprocessing.camera = new THREE.OrthographicCamera(-0.5, 0.5, 0.5, -0.5, -10000, 10000);\n      postprocessing.camera.position.z = 100;\n      postprocessing.scene.add(postprocessing.camera);\n      var pars = {\n        minFilter: THREE.LinearFilter,\n        magFilter: THREE.LinearFilter,\n        format: THREE.RGBFormat\n      };\n      postprocessing.rtTextureColors = new THREE.WebGLRenderTarget(renderTargetWidth, renderTargetHeight, pars); // Switching the depth formats to luminance from rgb doesn't seem to work. I didn't\n      // investigate further for now.\n      // pars.format = LuminanceFormat;\n      // I would have this quarter size and use it as one of the ping-pong render\n      // targets but the aliasing causes some temporal flickering\n\n      postprocessing.rtTextureDepth = new THREE.WebGLRenderTarget(renderTargetWidth, renderTargetHeight, pars);\n      postprocessing.rtTextureDepthMask = new THREE.WebGLRenderTarget(renderTargetWidth, renderTargetHeight, pars); // The ping-pong render targets can use an adjusted resolution to minimize cost\n\n      var adjustedWidth = renderTargetWidth * godrayRenderTargetResolutionMultiplier;\n      var adjustedHeight = renderTargetHeight * godrayRenderTargetResolutionMultiplier;\n      postprocessing.rtTextureGodRays1 = new THREE.WebGLRenderTarget(adjustedWidth, adjustedHeight, pars);\n      postprocessing.rtTextureGodRays2 = new THREE.WebGLRenderTarget(adjustedWidth, adjustedHeight, pars); // god-ray shaders\n\n      var godraysMaskShader = GodRaysDepthMaskShader;\n      postprocessing.godrayMaskUniforms = THREE.UniformsUtils.clone(godraysMaskShader.uniforms);\n      postprocessing.materialGodraysDepthMask = new THREE.ShaderMaterial({\n        uniforms: postprocessing.godrayMaskUniforms,\n        vertexShader: godraysMaskShader.vertexShader,\n        fragmentShader: godraysMaskShader.fragmentShader\n      });\n      var godraysGenShader = GodRaysGenerateShader;\n      postprocessing.godrayGenUniforms = THREE.UniformsUtils.clone(godraysGenShader.uniforms);\n      postprocessing.materialGodraysGenerate = new THREE.ShaderMaterial({\n        uniforms: postprocessing.godrayGenUniforms,\n        vertexShader: godraysGenShader.vertexShader,\n        fragmentShader: godraysGenShader.fragmentShader\n      });\n      var godraysCombineShader = GodRaysCombineShader;\n      postprocessing.godrayCombineUniforms = THREE.UniformsUtils.clone(godraysCombineShader.uniforms);\n      postprocessing.materialGodraysCombine = new THREE.ShaderMaterial({\n        uniforms: postprocessing.godrayCombineUniforms,\n        vertexShader: godraysCombineShader.vertexShader,\n        fragmentShader: godraysCombineShader.fragmentShader\n      });\n      var godraysFakeSunShader = GodRaysFakeSunShader;\n      postprocessing.godraysFakeSunUniforms = THREE.UniformsUtils.clone(godraysFakeSunShader.uniforms);\n      postprocessing.materialGodraysFakeSun = new THREE.ShaderMaterial({\n        uniforms: postprocessing.godraysFakeSunUniforms,\n        vertexShader: godraysFakeSunShader.vertexShader,\n        fragmentShader: godraysFakeSunShader.fragmentShader\n      });\n      postprocessing.godraysFakeSunUniforms.bgColor.value.setHex(bgColor);\n      postprocessing.godraysFakeSunUniforms.sunColor.value.setHex(sunColor);\n      postprocessing.godrayCombineUniforms.fGodRayIntensity.value = 0.75;\n      postprocessing.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(1.0, 1.0), postprocessing.materialGodraysGenerate);\n      postprocessing.quad.position.z = -9900;\n      postprocessing.scene.add(postprocessing.quad);\n    }\n\n    function animate() {\n      requestAnimationFrame(animate, renderer.domElement);\n      stats.begin();\n      render();\n      stats.end();\n    }\n\n    function getStepSize(filterLen, tapsPerPass, pass) {\n      return filterLen * Math.pow(tapsPerPass, -pass);\n    }\n\n    function filterGodRays(inputTex, renderTarget, stepSize) {\n      postprocessing.scene.overrideMaterial = postprocessing.materialGodraysGenerate;\n      postprocessing.godrayGenUniforms[\"fStepSize\"].value = stepSize;\n      postprocessing.godrayGenUniforms[\"tInput\"].value = inputTex;\n      renderer.setRenderTarget(renderTarget);\n      renderer.render(postprocessing.scene, postprocessing.camera);\n      postprocessing.scene.overrideMaterial = null;\n    }\n\n    function render() {\n      var time = Date.now() / 4000;\n      sphereMesh.position.x = orbitRadius * Math.cos(time);\n      sphereMesh.position.z = orbitRadius * Math.sin(time) - 100;\n      camera.position.x += (mouseX - camera.position.x) * 0.036;\n      camera.position.y += (-mouseY - camera.position.y) * 0.036;\n      camera.lookAt(scene.position);\n\n      if (postprocessing.enabled) {\n        // Find the screenspace position of the sun\n        screenSpacePosition.copy(sunPosition).project(camera);\n        screenSpacePosition.x = (screenSpacePosition.x + 1) / 2;\n        screenSpacePosition.y = (screenSpacePosition.y + 1) / 2; // Give it to the god-ray and sun shaders\n\n        postprocessing.godrayGenUniforms[\"vSunPositionScreenSpace\"].value.x = screenSpacePosition.x;\n        postprocessing.godrayGenUniforms[\"vSunPositionScreenSpace\"].value.y = screenSpacePosition.y;\n        postprocessing.godraysFakeSunUniforms[\"vSunPositionScreenSpace\"].value.x = screenSpacePosition.x;\n        postprocessing.godraysFakeSunUniforms[\"vSunPositionScreenSpace\"].value.y = screenSpacePosition.y; // -- Draw sky and sun --\n        // Clear colors and depths, will clear to sky color\n\n        renderer.setRenderTarget(postprocessing.rtTextureColors);\n        renderer.clear(true, true, false); // Sun render. Runs a shader that gives a brightness based on the screen\n        // space distance to the sun. Not very efficient, so i make a scissor\n        // rectangle around the suns position to avoid rendering surrounding pixels.\n\n        var sunsqH = 0.74 * window.innerHeight; // 0.74 depends on extent of sun from shader\n\n        var sunsqW = 0.74 * window.innerHeight; // both depend on height because sun is aspect-corrected\n\n        screenSpacePosition.x *= window.innerWidth;\n        screenSpacePosition.y *= window.innerHeight;\n        renderer.setScissor(screenSpacePosition.x - sunsqW / 2, screenSpacePosition.y - sunsqH / 2, sunsqW, sunsqH);\n        renderer.setScissorTest(true);\n        postprocessing.godraysFakeSunUniforms[\"fAspect\"].value = window.innerWidth / window.innerHeight;\n        postprocessing.scene.overrideMaterial = postprocessing.materialGodraysFakeSun;\n        renderer.setRenderTarget(postprocessing.rtTextureColors);\n        renderer.render(postprocessing.scene, postprocessing.camera);\n        renderer.setScissorTest(false); // -- Draw scene objects --\n        // Colors\n\n        scene.overrideMaterial = null;\n        renderer.setRenderTarget(postprocessing.rtTextureColors);\n        renderer.render(scene, camera); // Depth\n\n        scene.overrideMaterial = materialDepth;\n        renderer.setRenderTarget(postprocessing.rtTextureDepth);\n        renderer.clear();\n        renderer.render(scene, camera); //\n\n        postprocessing.godrayMaskUniforms[\"tInput\"].value = postprocessing.rtTextureDepth.texture;\n        postprocessing.scene.overrideMaterial = postprocessing.materialGodraysDepthMask;\n        renderer.setRenderTarget(postprocessing.rtTextureDepthMask);\n        renderer.render(postprocessing.scene, postprocessing.camera); // -- Render god-rays --\n        // Maximum length of god-rays (in texture space [0,1]X[0,1])\n\n        var filterLen = 1.0; // Samples taken by filter\n\n        var TAPS_PER_PASS = 6.0; // Pass order could equivalently be 3,2,1 (instead of 1,2,3), which\n        // would start with a small filter support and grow to large. however\n        // the large-to-small order produces less objectionable aliasing artifacts that\n        // appear as a glimmer along the length of the beams\n        // pass 1 - render into first ping-pong target\n\n        filterGodRays(postprocessing.rtTextureDepthMask.texture, postprocessing.rtTextureGodRays2, getStepSize(filterLen, TAPS_PER_PASS, 1.0)); // pass 2 - render into second ping-pong target\n\n        filterGodRays(postprocessing.rtTextureGodRays2.texture, postprocessing.rtTextureGodRays1, getStepSize(filterLen, TAPS_PER_PASS, 2.0)); // pass 3 - 1st RT\n\n        filterGodRays(postprocessing.rtTextureGodRays1.texture, postprocessing.rtTextureGodRays2, getStepSize(filterLen, TAPS_PER_PASS, 3.0)); // final pass - composite god-rays onto colors\n\n        postprocessing.godrayCombineUniforms[\"tColors\"].value = postprocessing.rtTextureColors.texture;\n        postprocessing.godrayCombineUniforms[\"tGodRays\"].value = postprocessing.rtTextureGodRays2.texture;\n        postprocessing.scene.overrideMaterial = postprocessing.materialGodraysCombine;\n        renderer.setRenderTarget(null);\n        renderer.render(postprocessing.scene, postprocessing.camera);\n        postprocessing.scene.overrideMaterial = null;\n      } else {\n        renderer.setRenderTarget(null);\n        renderer.clear();\n        renderer.render(scene, camera);\n      }\n    }\n  }, [Treeref]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    ref: TreeRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/lambda_school_loaner_126/Desktop/CMT-FE/src/Components/ThreeEffects/Geometries/Tree.js"],"names":["React","useEffect","useRef","THREE","Stats","OBJLoader","GodRaysFakeSunShader","GodRaysDepthMaskShader","GodRaysCombineShader","GodRaysGenerateShader","Tree","TreeRef","container","stats","camera","scene","renderer","materialDepth","sphereMesh","sunPosition","Vector3","screenSpacePosition","mouseX","mouseY","postprocessing","enabled","orbitRadius","bgColor","sunColor","godrayRenderTargetResolutionMultiplier","init","animate","document","createElement","body","appendChild","PerspectiveCamera","window","innerWidth","innerHeight","position","z","Scene","MeshDepthMaterial","materialScene","MeshBasicMaterial","color","loader","load","object","material","set","scale","multiplyScalar","add","geo","SphereBufferGeometry","Mesh","WebGLRenderer","setClearColor","setPixelRatio","devicePixelRatio","setSize","domElement","autoClear","dom","addEventListener","onDocumentMouseMove","onDocumentTouchStart","onDocumentTouchMove","onWindowResize","initPostprocessing","event","clientX","clientY","touches","length","preventDefault","pageX","pageY","renderTargetWidth","renderTargetHeight","aspect","updateProjectionMatrix","rtTextureColors","rtTextureDepth","rtTextureDepthMask","adjustedWidth","adjustedHeight","rtTextureGodRays1","rtTextureGodRays2","OrthographicCamera","pars","minFilter","LinearFilter","magFilter","format","RGBFormat","WebGLRenderTarget","godraysMaskShader","godrayMaskUniforms","UniformsUtils","clone","uniforms","materialGodraysDepthMask","ShaderMaterial","vertexShader","fragmentShader","godraysGenShader","godrayGenUniforms","materialGodraysGenerate","godraysCombineShader","godrayCombineUniforms","materialGodraysCombine","godraysFakeSunShader","godraysFakeSunUniforms","materialGodraysFakeSun","value","setHex","fGodRayIntensity","quad","PlaneBufferGeometry","requestAnimationFrame","begin","render","end","getStepSize","filterLen","tapsPerPass","pass","Math","pow","filterGodRays","inputTex","renderTarget","stepSize","overrideMaterial","setRenderTarget","time","Date","now","x","cos","sin","y","lookAt","copy","project","clear","sunsqH","sunsqW","setScissor","setScissorTest","texture","TAPS_PER_PASS","Treeref"],"mappings":"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","sourcesContent":["import React,{useEffect,useRef} from 'react'\nimport * as THREE from 'three';\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\nimport { GodRaysFakeSunShader, GodRaysDepthMaskShader, GodRaysCombineShader, GodRaysGenerateShader } from 'three/examples/jsm/shaders/GodRaysShader.js';\n//Got Geometry from docs\nexport default function Tree() {\n    const TreeRef = useRef()\n    useEffect(() => {\n        var container, stats;\n        var camera, scene, renderer, materialDepth;\n        var sphereMesh;\n        var sunPosition = new THREE.Vector3( 0, 1000, - 1000 );\n        var screenSpacePosition = new THREE.Vector3();\n        var mouseX = 0, mouseY = 0;\n        var postprocessing = { enabled: true };\n        var orbitRadius = 200;\n        var bgColor = 0x000511;\n        var sunColor = 0xffee00;\n        // Use a smaller size for some of the god-ray render targets for better performance.\n        var godrayRenderTargetResolutionMultiplier = 1.0 / 4.0;\n        init();\n        animate();\n        function init() {\n            container = document.createElement( 'div' );\n            document.body.appendChild( container );\n            //\n            camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 3000 );\n            camera.position.z = 200;\n            scene = new THREE.Scene();\n            //\n            materialDepth = new THREE.MeshDepthMaterial();\n            var materialScene = new THREE.MeshBasicMaterial( { color: 0x000000 } );\n            // tree\n            var loader = new OBJLoader();\n            loader.load( 'models/obj/tree.obj', function ( object ) {\n                object.material = materialScene;\n                object.position.set( 0, - 150, - 150 );\n                object.scale.multiplyScalar( 400 );\n                scene.add( object );\n            } );\n            // sphere\n            var geo = new THREE.SphereBufferGeometry( 1, 20, 10 );\n            sphereMesh = new THREE.Mesh( geo, materialScene );\n            sphereMesh.scale.multiplyScalar( 20 );\n            scene.add( sphereMesh );\n            //\n            renderer = new THREE.WebGLRenderer();\n            renderer.setClearColor( 0xffffff );\n            renderer.setPixelRatio( window.devicePixelRatio );\n            renderer.setSize( window.innerWidth, window.innerHeight );\n            container.appendChild( renderer.domElement );\n            renderer.autoClear = false;\n            //\n            stats = new Stats();\n            container.appendChild( stats.dom );\n            //\n            document.addEventListener( 'mousemove', onDocumentMouseMove, false );\n            document.addEventListener( 'touchstart', onDocumentTouchStart, false );\n            document.addEventListener( 'touchmove', onDocumentTouchMove, false );\n            window.addEventListener( 'resize', onWindowResize, false );\n            //\n            initPostprocessing( window.innerWidth, window.innerHeight );\n        }\n        //\n        function onDocumentMouseMove( event ) {\n            mouseX = event.clientX - window.innerWidth / 2;\n            mouseY = event.clientY - window.innerHeight / 2;\n        }\n        function onDocumentTouchStart( event ) {\n            if ( event.touches.length === 1 ) {\n                event.preventDefault();\n                mouseX = event.touches[ 0 ].pageX - window.innerWidth / 2;\n                mouseY = event.touches[ 0 ].pageY - window.innerHeight / 2;\n            }\n        }\n        function onDocumentTouchMove( event ) {\n            if ( event.touches.length === 1 ) {\n                event.preventDefault();\n                mouseX = event.touches[ 0 ].pageX - window.innerWidth / 2;\n                mouseY = event.touches[ 0 ].pageY - window.innerHeight / 2;\n            }\n        }\n        //\n        function onWindowResize() {\n            var renderTargetWidth = window.innerWidth;\n            var renderTargetHeight = window.innerHeight;\n            camera.aspect = renderTargetWidth / renderTargetHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize( renderTargetWidth, renderTargetHeight );\n            postprocessing.rtTextureColors.setSize( renderTargetWidth, renderTargetHeight );\n            postprocessing.rtTextureDepth.setSize( renderTargetWidth, renderTargetHeight );\n            postprocessing.rtTextureDepthMask.setSize( renderTargetWidth, renderTargetHeight );\n            var adjustedWidth = renderTargetWidth * godrayRenderTargetResolutionMultiplier;\n            var adjustedHeight = renderTargetHeight * godrayRenderTargetResolutionMultiplier;\n            postprocessing.rtTextureGodRays1.setSize( adjustedWidth, adjustedHeight );\n            postprocessing.rtTextureGodRays2.setSize( adjustedWidth, adjustedHeight );\n        }\n        function initPostprocessing( renderTargetWidth, renderTargetHeight ) {\n            postprocessing.scene = new THREE.Scene();\n            postprocessing.camera = new THREE.OrthographicCamera( - 0.5, 0.5, 0.5, - 0.5, - 10000, 10000 );\n            postprocessing.camera.position.z = 100;\n            postprocessing.scene.add( postprocessing.camera );\n            var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat };\n            postprocessing.rtTextureColors = new THREE.WebGLRenderTarget( renderTargetWidth, renderTargetHeight, pars );\n            // Switching the depth formats to luminance from rgb doesn't seem to work. I didn't\n            // investigate further for now.\n            // pars.format = LuminanceFormat;\n            // I would have this quarter size and use it as one of the ping-pong render\n            // targets but the aliasing causes some temporal flickering\n            postprocessing.rtTextureDepth = new THREE.WebGLRenderTarget( renderTargetWidth, renderTargetHeight, pars );\n            postprocessing.rtTextureDepthMask = new THREE.WebGLRenderTarget( renderTargetWidth, renderTargetHeight, pars );\n            // The ping-pong render targets can use an adjusted resolution to minimize cost\n            var adjustedWidth = renderTargetWidth * godrayRenderTargetResolutionMultiplier;\n            var adjustedHeight = renderTargetHeight * godrayRenderTargetResolutionMultiplier;\n            postprocessing.rtTextureGodRays1 = new THREE.WebGLRenderTarget( adjustedWidth, adjustedHeight, pars );\n            postprocessing.rtTextureGodRays2 = new THREE.WebGLRenderTarget( adjustedWidth, adjustedHeight, pars );\n            // god-ray shaders\n            var godraysMaskShader = GodRaysDepthMaskShader;\n            postprocessing.godrayMaskUniforms = THREE.UniformsUtils.clone( godraysMaskShader.uniforms );\n            postprocessing.materialGodraysDepthMask = new THREE.ShaderMaterial( {\n                uniforms: postprocessing.godrayMaskUniforms,\n                vertexShader: godraysMaskShader.vertexShader,\n                fragmentShader: godraysMaskShader.fragmentShader\n            } );\n            var godraysGenShader = GodRaysGenerateShader;\n            postprocessing.godrayGenUniforms = THREE.UniformsUtils.clone( godraysGenShader.uniforms );\n            postprocessing.materialGodraysGenerate = new THREE.ShaderMaterial( {\n                uniforms: postprocessing.godrayGenUniforms,\n                vertexShader: godraysGenShader.vertexShader,\n                fragmentShader: godraysGenShader.fragmentShader\n            } );\n            var godraysCombineShader = GodRaysCombineShader;\n            postprocessing.godrayCombineUniforms = THREE.UniformsUtils.clone( godraysCombineShader.uniforms );\n            postprocessing.materialGodraysCombine = new THREE.ShaderMaterial( {\n                uniforms: postprocessing.godrayCombineUniforms,\n                vertexShader: godraysCombineShader.vertexShader,\n                fragmentShader: godraysCombineShader.fragmentShader\n            } );\n            var godraysFakeSunShader = GodRaysFakeSunShader;\n            postprocessing.godraysFakeSunUniforms = THREE.UniformsUtils.clone( godraysFakeSunShader.uniforms );\n            postprocessing.materialGodraysFakeSun = new THREE.ShaderMaterial( {\n                uniforms: postprocessing.godraysFakeSunUniforms,\n                vertexShader: godraysFakeSunShader.vertexShader,\n                fragmentShader: godraysFakeSunShader.fragmentShader\n            } );\n            postprocessing.godraysFakeSunUniforms.bgColor.value.setHex( bgColor );\n            postprocessing.godraysFakeSunUniforms.sunColor.value.setHex( sunColor );\n            postprocessing.godrayCombineUniforms.fGodRayIntensity.value = 0.75;\n            postprocessing.quad = new THREE.Mesh(\n                new THREE.PlaneBufferGeometry( 1.0, 1.0 ),\n                postprocessing.materialGodraysGenerate\n            );\n            postprocessing.quad.position.z = - 9900;\n            postprocessing.scene.add( postprocessing.quad );\n        }\n        function animate() {\n            requestAnimationFrame( animate, renderer.domElement );\n            stats.begin();\n            render();\n            stats.end();\n        }\n        function getStepSize( filterLen, tapsPerPass, pass ) {\n            return filterLen * Math.pow( tapsPerPass, - pass );\n        }\n        function filterGodRays( inputTex, renderTarget, stepSize ) {\n            postprocessing.scene.overrideMaterial = postprocessing.materialGodraysGenerate;\n            postprocessing.godrayGenUniforms[ \"fStepSize\" ].value = stepSize;\n            postprocessing.godrayGenUniforms[ \"tInput\" ].value = inputTex;\n            renderer.setRenderTarget( renderTarget );\n            renderer.render( postprocessing.scene, postprocessing.camera );\n            postprocessing.scene.overrideMaterial = null;\n        }\n        function render() {\n            var time = Date.now() / 4000;\n            sphereMesh.position.x = orbitRadius * Math.cos( time );\n            sphereMesh.position.z = orbitRadius * Math.sin( time ) - 100;\n            camera.position.x += ( mouseX - camera.position.x ) * 0.036;\n            camera.position.y += ( - ( mouseY ) - camera.position.y ) * 0.036;\n            camera.lookAt( scene.position );\n            if ( postprocessing.enabled ) {\n                // Find the screenspace position of the sun\n                screenSpacePosition.copy( sunPosition ).project( camera );\n                screenSpacePosition.x = ( screenSpacePosition.x + 1 ) / 2;\n                screenSpacePosition.y = ( screenSpacePosition.y + 1 ) / 2;\n                // Give it to the god-ray and sun shaders\n                postprocessing.godrayGenUniforms[ \"vSunPositionScreenSpace\" ].value.x = screenSpacePosition.x;\n                postprocessing.godrayGenUniforms[ \"vSunPositionScreenSpace\" ].value.y = screenSpacePosition.y;\n                postprocessing.godraysFakeSunUniforms[ \"vSunPositionScreenSpace\" ].value.x = screenSpacePosition.x;\n                postprocessing.godraysFakeSunUniforms[ \"vSunPositionScreenSpace\" ].value.y = screenSpacePosition.y;\n                // -- Draw sky and sun --\n                // Clear colors and depths, will clear to sky color\n                renderer.setRenderTarget( postprocessing.rtTextureColors );\n                renderer.clear( true, true, false );\n                // Sun render. Runs a shader that gives a brightness based on the screen\n                // space distance to the sun. Not very efficient, so i make a scissor\n                // rectangle around the suns position to avoid rendering surrounding pixels.\n                var sunsqH = 0.74 * window.innerHeight; // 0.74 depends on extent of sun from shader\n                var sunsqW = 0.74 * window.innerHeight; // both depend on height because sun is aspect-corrected\n                screenSpacePosition.x *= window.innerWidth;\n                screenSpacePosition.y *= window.innerHeight;\n                renderer.setScissor( screenSpacePosition.x - sunsqW / 2, screenSpacePosition.y - sunsqH / 2, sunsqW, sunsqH );\n                renderer.setScissorTest( true );\n                postprocessing.godraysFakeSunUniforms[ \"fAspect\" ].value = window.innerWidth / window.innerHeight;\n                postprocessing.scene.overrideMaterial = postprocessing.materialGodraysFakeSun;\n                renderer.setRenderTarget( postprocessing.rtTextureColors );\n                renderer.render( postprocessing.scene, postprocessing.camera );\n                renderer.setScissorTest( false );\n                // -- Draw scene objects --\n                // Colors\n                scene.overrideMaterial = null;\n                renderer.setRenderTarget( postprocessing.rtTextureColors );\n                renderer.render( scene, camera );\n                // Depth\n                scene.overrideMaterial = materialDepth;\n                renderer.setRenderTarget( postprocessing.rtTextureDepth );\n                renderer.clear();\n                renderer.render( scene, camera );\n                //\n                postprocessing.godrayMaskUniforms[ \"tInput\" ].value = postprocessing.rtTextureDepth.texture;\n                postprocessing.scene.overrideMaterial = postprocessing.materialGodraysDepthMask;\n                renderer.setRenderTarget( postprocessing.rtTextureDepthMask );\n                renderer.render( postprocessing.scene, postprocessing.camera );\n                // -- Render god-rays --\n                // Maximum length of god-rays (in texture space [0,1]X[0,1])\n                var filterLen = 1.0;\n                // Samples taken by filter\n                var TAPS_PER_PASS = 6.0;\n                // Pass order could equivalently be 3,2,1 (instead of 1,2,3), which\n                // would start with a small filter support and grow to large. however\n                // the large-to-small order produces less objectionable aliasing artifacts that\n                // appear as a glimmer along the length of the beams\n                // pass 1 - render into first ping-pong target\n                filterGodRays( postprocessing.rtTextureDepthMask.texture, postprocessing.rtTextureGodRays2, getStepSize( filterLen, TAPS_PER_PASS, 1.0 ) );\n                // pass 2 - render into second ping-pong target\n                filterGodRays( postprocessing.rtTextureGodRays2.texture, postprocessing.rtTextureGodRays1, getStepSize( filterLen, TAPS_PER_PASS, 2.0 ) );\n                // pass 3 - 1st RT\n                filterGodRays( postprocessing.rtTextureGodRays1.texture, postprocessing.rtTextureGodRays2, getStepSize( filterLen, TAPS_PER_PASS, 3.0 ) );\n                // final pass - composite god-rays onto colors\n                postprocessing.godrayCombineUniforms[ \"tColors\" ].value = postprocessing.rtTextureColors.texture;\n                postprocessing.godrayCombineUniforms[ \"tGodRays\" ].value = postprocessing.rtTextureGodRays2.texture;\n                postprocessing.scene.overrideMaterial = postprocessing.materialGodraysCombine;\n                renderer.setRenderTarget( null );\n                renderer.render( postprocessing.scene, postprocessing.camera );\n                postprocessing.scene.overrideMaterial = null;\n            } else {\n                renderer.setRenderTarget( null );\n                renderer.clear();\n                renderer.render( scene, camera );\n            }\n        }\n    }, [Treeref])\n    return (\n        <div>\n            <div ref= {TreeRef}>\n          \n            </div>      \n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}